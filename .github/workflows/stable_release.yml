name: WIP Release Workflow

# Configure Manual Trigger
on:
    workflow_dispatch

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Check out Git repository
              uses: actions/checkout@v3

            - uses: pnpm/action-setup@v3
              with:
                version: 8

            - name: Install Node.js dependencies
              run: pnpm install
      
            - name: build theme
              run: | 
                pnpm run build
                git add theme.css

            - name: Commit build
              run: |
                git config --global user.name 'Nato'
                git config --global user.email 'natowb@users.noreply.github.com'
                git add theme.css
                git commit -am "build"
                git push

            - name: bump version
              run: | 
                pnpm config set tag-version-prefix ''
                pnpm version patch
                git push --tags

    print:
      runs-on: ubuntu-latest
      steps:
        - name: Check out Git repository
          uses: actions/checkout@v2

        - name: get-npm-version
          id: package-version
          uses: martinbeentjes/npm-get-version-action@v1.3.1

        - name: print version
          run: echo ${{ steps.package-version.outputs.current-version}}





